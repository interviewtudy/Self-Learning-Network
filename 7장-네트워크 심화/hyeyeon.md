# 안정성을 위한 기술

- 안정성을 수치로 표현하는 가용성
- 안정성을 높이기 위한 방법으로 물리적 장비나 프로그램 등 여러 개 두는 기술인 이중화, 다중화
- 트래픽을 고르게 분산하는 로드 밸런싱

## 가용성

안정성 : 특정 기능을 언제든지 균일한 성능으로 수행할 수 있는 특성
그럼 수치화 하는 용어로는 가용성, 고가용성이 있다.

가용성 : 컴퓨터 시스템이 특정 기능을 실제로 수행 할 수 있는 시간의 비율 즉, 전체 사용 시간 중에서 정상적인 사용 시간(업타임)을 의미
그럼, 정상적인 사용이 불가능할 때는 다운타임으로 정의했을 때

가용성 = 업타임 / (업타임 + 다운타임)
수식의 결과값이 크면 가용성이 높다고 표현, 가용성이 높은 성질을 고가용성이라고 한다.

가용성을 높일려면 다운타임을 낮춰야 한다.
다운타임의 원인은 많다(과도한 트래픽, SW오류, 보안공격 등)
그렇기에 문제를 원천차단보다는 발생하더라도 계속 기능 할 수 있도록 설계해야한다.
문제가 발생하더라도 기능할 수 있는 능력을 결함 감내라고 부릅니다.

</br>
정리하면 다운타임을 낮추고 가용성을 높이기 위해서는 결함을 감내할 수 있도록 서비스나 인프라를 설계하는 것이 중요

## 이중화

결함을 감내하여 가용성을 높이기 위해 무언가를 이중으로 두는 기술 (백업 마련)
이중화 대상은 문제가 발생할 경우 시스템 전체가 중단될 수 있는 대상(DB, 웹 서버, 스위치 등등)이다.
</br>
단일 장애점(SPOF) : 문제가 발생할 경우 시스템 전체가 중단될 수 있는 대상
가용성을 높이기 위해서는 SPOF를 이중화하는 것이 좋다.

이중화 구성에는

1. 액티브/스탠바이
   - 한 시스템은 가동하고, 다른 시스템은 백업 용도로 대기 상태로 두는 방식
   - 액티브 시스템이 문제가 발생할 경우 자동으로 스탠바이가 대신하여 동작
   - 안전하지만 성능상의 변화 X
2. 액티브/액티브
   - 두 시스템 모두를 가동 상태로 두는 구성 방식
   - 부하가 분산되고 성능상 이점이 있음
   - 하지만, 한 쪽에 문제가 생겼을 때 순간적으로 다른 쪽에 부하가 급증되어 추가적인 문제가 생길 수 있음

이중이아니라 SPOF를 여러개 구성하는 방식은 다중화라고 한다.
당연히 이중화보다 안정적인 운영이 가능하다

## 로드 밸런싱

고가용성을 요구하는 하는 건 일반적으로 서버이다.
서버를 다중화했더라도 트래픽 분산 방법에 대해 생각해봐야한다.

- 트래픽 (주어진 시점에 트겅 노드를 경유한 패킷의 양)
  과도한 트래픽은 서버의 가용성을 떨어뜨린다.

트래픽의 고른 분배를 위해 사용되는 기술이 로드 밸런싱이다.
밸런싱은 로드 밸런서에 의해 수행된다.

로드 밸런서는 L4 스위치, L7 스위치라 불리는 네트워크 장비로 수행할 수 있지만, 로드 밸런싱을 제공하는 SW를 설치하면 일반 호스트로 할 수 있다(HAProxy, Envoy)
로드 밸런서는 일반적으로 이중화나 다중화된 서버와 클라이언트 사이에 위치하여 트랙픽을 분산한다.

- 주기적으로 서버의 상태를 확인하는 헬스 체크도 진행함

부하가 균등하게 분산되도록 부하 대상을 선택하는 방법을 로드 밸런싱 알고리즘이라고 부른다.
ex) 단순히 서버를 돌아가며 부하를 전달하는 라운드 로빈 알고리즘, 연결이 적은 서버부터 우선적으로 부하를 전달하는 최소 연결 알고리즘

## 안전성을 위한 기술

암호화는 원문 데이터를 알아볼 수 없는 형태로 변경하는 것을 의미, 반대로 복호화는 암호화된 원문 데이터로 되돌리는 과정을 말함
암호화와 복호화는 비단 안전한 데이터 송수신뿐만 아니라 인증서 기반의 검증도 가능하게 한다.

## 암호화와 인증서

대칭 키 암호화 : 암호화와 복호화에 동일한 키를 사용한다. 그렇기에 상대방에게 키를 안전하게 전달하는 방법이 필요하다
공개(비대칭) 키 암호화 : 키를 각각 공개 키, 개인 키로 나눠 사용

대칭키는 키를 안전하게 전송하기 어렵지만, 적은 부하 덕분에 암호화 및 복호화를 빠르게 수행할 수 있습니다. 반면 공개 키 암호화는 부하와 시간이 많이 들지만 키를 안전하게 공유할 수 있다.

이러한 장단점을 고려해 대칭 키 암호화 방식과 공개 키 암호화 방식을 함께 사용하는 경우가 있다
대칭키를 상대에게 안전하게 전달하기 우해 공개키로 대칭 키를 안호화하고, 개인 키로 암호화된 대칭 키를 복호화할 수 있다. 이런 방식을 사용 키를 세션키라고 한다.

## 인증서와 디지털 서명

인증서는 일반적으로 공개 키 인증서를 일컫는다.
공개 키와 공개 키의 유효성을 입증하기 위한 전자 문서이다.

이러한 인증서는 인증 기관(CA)이라는 기관에서 발급
인증서에는 키가 유효함을 보증하는 서명값이 담겨 있다.

서명 값은 인증서 내용에 대한 해시 값을 CA의 개인키로 암호화하는 방식으로 만들어진다.
CA는 이렇게 얻어낸 정보를 서명 값으로 삼아 클라이언트에게 인증서와 함께 전송한다.

이러한 절차를 디지터 서명이라고 부른다.

## HTTPS: SSL과 TLS

SSL과 TLS은 인증과 암호화를 수행하는 프로토콜이며, TLS는 SSL를 계승한 프로토콜이다.
SSL/TLS 이를 사용하는 대표적인 프로토콜은 HTTPS입니다.
HTTPS 메세지는 크게 다음과 같은 단계를 거쳐 송수신된다.

1. TCP 쓰리 웨이 핸드셰이크
2. TLS 핸드셰이크
   - 암호화 통신을 위한 키를 교환
   - 인증서 송수신과 검증이 이루어진다.
3. 암호화된 메시지 송수신

# 무선 네트워크

무선 네트워크에 전파라는 연결 매체, 802.11이라는 표준 그에 기반한 Wi-Fi이라는 기술, AP라는 장비가 있다

## 전파와 주파수

전파는 눈에 보이지 않는 전자기파의 일종
많은 기기가 전파를 통해 통신하면 서로 다른 전파 신호가 같은 공감에 혼재하기에 서로 구분하기 위해 전파에는 주파수 대역이 정해져있다.

## 와이파이와 802.11

IEEE 802.11 표준은 대부분 2.4GHz, 5GHz 대역을 사용한다.
