# 이더넷

물리 계층과 데이터 링크 계층은 서로 연관되어 있다.

이더넷: 다양한 통신 매체의 규격들과 송수신되는 프레임의 형태, 프레임을 주고받는 방법 등이 정의된 네트워크 기술

## 이더넷 표준

유선 LAN 환경은 대부분 이더넷을 기반으로 구성되어 있다.
물리계층에서는 이더넷 규격 케이블을 사용했을 것이고, 데이터 링크 계층에서 주고받는 이더넷 프레임의 형식을 따를 것이다.

현재 이더넷은 국제적인 표준화가 이루어져있다. (IEEE 802.3)
이더넷 표준에 따라 지원되는 네트워크 장비, 통신 매체의 종류와 전송 속도 등이 달라질 수 있다.

## 통신 매체 표기 형태

이더넷 표준 규격에 따라 구현된 통신 매체를 지칭할 떄에는 매체의 속도와 특징을 한눈에 파악하기 쉬도록 '전송 속도 BASE-추가 특성' 형식으로 표기

1. 전송 속도
2. 베이스 (비트 신호로 변환된 데이터를 통신 매체로 전송하는 방법, 변조타입을 의미)
   - 보통 베이스이고, 그외에 브로드밴드, 패스 밴드도 있다.
3. 추가 특성
   - 명시될 수 있는 특성의 종류는 다양 (전송 가능한 최대 거리, 물리 계층 인코딩, 레인 수)

## 통신 매체 종류

| 추가 특성 표기 |      케이블 종류       |
| :------------: | :--------------------: |
|       C        |      동축 케이블       |
|       T        | 트위스티드 페어 케이블 |
|       S        |  단파장 광섬유 케이블  |
|       L        |  장파장 광섬유 케이블  |

## 이더넷 프레임

상위 계층으로부터 받아들인 정보와 헤더와 트레일러를 추가하는 캡슐화 과정을 통해 만들어진다.
수신지 입장에서는 프레임의 헤더와 트레일러를 제거한 뒤 상위 계층으로 올려보내는 역캡슐화 과정을 거친다.
</br>
|<------------------- 헤더 ----------------------><-- 페이로드 --><-- 트레일러-->
| 프리앰블 | 수신지 MAC 주소 | 송신지 MAC 주소 | 타입/길이 | 데이터 | FCS |

### 프리앰블

이더넷 프레임의 시작을 알리는 8바이트 크기의 정보
프리앰블은 송수신지 간의 동기화를 위해 사용되는 정보이다.

### 수신지 MAC 주소와 송신지 MAC 주소

MAC == 물리적 주소, 일반적으로 변경되지 않는 주소로써 네트워크 인터페이스마다 부여가 된다.
보통 NIC라는 장치가 네트워크 인터페이스 역할을 담당한다. 한 컴퓨터에 NIC가 여러 개 있다면 MAC 주소도 여러 개 있을 수 있다.

### 타입/길이

타입이란 이더넷 프레임이 어떤 정보를 캡슐화했는지 나타내는 정보이다. 이더터입이라고도 함
대표적으로 상위 계층에서 사용된 프로토코의 이름이 명시가 된다.

### 데이터

상위 계층에서 전달받거나 상위 계층으로 전달해야 할 내용이다.
네트워크 계층의 데이터와 헤더를 합친 PDU가 이곳에 저장이 되낟.

### FCS

수신한 이더넷 프레임에 오류가 있는지 확인하기 위한 필드

CRC, 순환 중복 검사하고 불리는 오류 검출용 값이 들어간다.
송신자는 프레앰블을 제외한 나머지 필드 값들을 바탕으로 CRC 값을 계산한 후, 이 값을 FCS 필드에 명시함

수신자는 수신한 프레임에서 프리앰블과 FCS 필드를 제외한 나머지 필드 값을 바탕으로 CRC값을 계산한 뒤 이값을 FCS 필드 값과 비교한다.
이때 비교 값이 일치하지 않으면 프레임에 오류가 있다고 판단하여 해당 프레임을 폐기한다.

# NIC와 케이블

NIC : 호스트와 통신 매체를 연결하고, MAC 주소가 부여되는 네트워크 장비 </br>
케이블: NIC에 연결되는 물리 계층의 유선 통신 매체 </br>
유선 네트워크에서 대표적인 케이블은 두 가지 있다.

1. 트위스트 페어 케이블
2. 광섬유 케이블

## NIC

호스트와 유무선 통신매체를 연결하고 매체를 통해 전달되는 신호를 컴퓨터가 이애할 수 있는 정보 변환을 담당하는 네트워크 장비

### NIC 역할

네트워크 인터페이스 역할을 수행

## 트위스티드 페어 케이블

구리 선으로 전기 신호를 받는 통신 매체

본체가 구리 선으로 상태로 전기 신호를 주고 받아 구리선에 전자적 간섭(노이즈)이 생길 수 있다
그래서 트위스티드 페어 케이블 중에 구리 선을 그물 모양의 철사(브레이드)나 포일로 감싼 차폐된 형태도 존재

</br>
- STP: 브레이드 실드로 감싼 케이블
- FTP: 포일로 감싼 케이블
- UTP: 감싸지지 않은 케이블

## 광섬유 케이블

빛을 이용해 정보를 주고 받는 케이블
구리에 비해 속도도 빠르고, 먼 거리까지 전송이 가능하다.

# 허브

통신 매체를 통해 송수신되는 메시지는 다른 호스트에게 전달되는 과정에서 네트워크 장비를 거칠 수 있다.
대표적으로 물리 계층 - 허브, 데이터 링크 계층 - 스위치가 존재

## 주소 개념이 없는 물리 계층

물리 계층에는 주소 개념이 없다.
송수신지를 특정할 수 있는 주소는 데이터 링크 계층부터 존재하는 개념

## 허브

여러 대의 호스트를 연결하는 장치, 리피터 허브라 부르기도 한다. 이더넷 네트워크 허브는 이더넷 허브라고 부른다.
포트: 호스트와 연결된 통신 매체를 연결 할 수 있다.

### 허브의 특징

1. 전달받은 신호를 다른 모든 포트로 그대로 다시 보낸다.
2. 반이중 모드로 통신한다.
   - 송수신을 번갈아 가면서 하는 통신 방식

### 콜리전 도메인

허브는 반이중 통신을 지원한다.한 호스트가 허브에 송신하는 동안 기다려야 하는데, 동시에 허브에 신호를 송신하게 되면 충돌 (콜리전)이 발생한다.
허브에 호스트가 많이 연결되어 있을수록 충돌 발생 가능성이 높다. 불시에 다른 호스트가 허브로 신호를 송신할 수 있다. 이렇게 충돌이 발생할 수 있는 영역을 콜리전 도메인이라고 한다,
허브에 연결된 모든 호스트는 같은 콜리전 도메인에 속한다.

허브의 넓은 콜리전 도메인으로 인한 충돌 문제를 해결하려면 CSMA/CD 프로토콜을 사용하거나 스위치 장비를 사용해야한다.

## CSMA/CD

허브에서 충돌이 발생하는 근본적인 이유는 허브가 반이중 모드로 통신하기 때문

CSMA/CD

1. CS는 캐리어 감지를 의미
   메시지를 보내기 전에 현재 네트워크상에서 전송 중인 것이 있는지 먼저 확인
2. MA는 멀티플 엑세스, 다중 접근을 의미한다
   복수의 호스트가 네트워크에 접근하려는 상황을 다중 접근이라고 한다.
3. CD는, 충돌 검출을 의미
   충돌이 발생하면 이를 검출하는 데, 이를 충돌 검출이라고 한다. 충돌을 감지하면 전송이 중단되고, 충돌을 검출한 호스트는 다른 이들에게 충돌이 발생했음을 알리고자 잼 신호라는 신로를 보낸다. 그리고 임의의 시간동안 기다린 뒤 다시 전송한다.

# 스위치

CSMA/CD를 통해 충돌 문제를 어느 정도 완화할 수 있지만, 더 근본적인 해결 바업이 있다.
전달받은 신호를 수신지 호스트가 연결된 포트로만 내보내고, 전이중 모드로 통신하면 된다. 그러면 포트별로 콜리전 도메인이 나눠지기 때문에 충돌 위험이 감소한다.
이러한 기능을 지원하는 네트워크 장치가 스위치이다.

## 스위치

데이터 링크 계층의 네트워크 장비이다. 2계층에서 사용한다고 하여 L2 스위치라고도 불린다.
스위치의 여러 포트에는 호스트를 연결할 수 있는데, 이런 점은 허브와 유사하다.

다만 스위치는 허브와 달리 MAC 주소를 학습해 특정 MAC 주소를 가진 호스트에만 프레임을 전달 할 수 있고, 전이중 모드의 통신을 지원한다.

### 스위치의 특징

스위치의 가장 중요한 특징은 특정 포트와 해당 포트에 연결된 호스트의 MAC 주소와의 관계를 기억한다는 점임, 이를 통해 원하는 호스트에만 프레임을 전달 할 수 있다, 스위치의 이러한 기능을 MAC주소 학습이라고 한다,

MAC 주소 학습
